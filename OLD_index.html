<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ゆかりとチャット♡</title>
  <script src="http://code.jquery.com/jquery-1.7.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script type="text/javascript">
var socket = io.connect('http://14.63.215.103:3000');
jQuery(document).ready(function() {
	jQuery('#talk').bind('keypress', function(e) {
		var code = (e.KeyCode ? e.KeyCode : e.which);
		if(code == 13) {
			socket.emit('foo', {chat : this.value });
			jQuery('#chatfield').append(this.value + "<br/>");
			this.value='';
		}
	});
	socket.on('bar', function(data) {
		jQuery('#chatfield').append(data.chat + "<br/>");
	});
});
  /*
      (function($){
          var socket = io.connect('http://14.63.215.103:3000');

          socket.on('joinok', function(nick){
              $("ul", "#nicknames").append("<li>"+nick+"</li>");
          });

          socket.on('nicknames', function(data) {
              var nicklist = $("ul", "#nicknames").empty();

              for (var i in data) {
                  $("ul", "#nicknames").append("<li>"+data[i]+"</li>");
              }
          });

          $("#join").on({
              click: function() {
                  var nick = $("#nick");
                  if (nick.val() == "") {
                      alert('NickName 을 입력해주세요.');
                      nick.focus();
                      return false;
                  } else {
                      socket.emit('join', nick.val());
                      nick.val("");
                  }

                  return false;
              }
          });

                socket.on('msgok', function(data) {
                      var msglist = $("ul", "#msglist").empty();

                      for (var i in data) {
                          $("ul", "#msglist").append("<li>"+data[i]+"</li>");
                      }

                });

              $("#send").on({
                  click: function() {
                      var msg = $("#msginput");
                      if (msg.val() == "") {
                          alert('message 을 입력해주세요.');
                          msg.focus();
                          return false;
                      } else {
                          socket.emit('msg', msg.val());
                          msg.val("");
                      }

                      return false;
                  }
              });

      })(jQuery);
*/
  </script>

  </head>
<body>
<!--
  //기존 소스에서
  <form id="set-nickname">
      <label>NickName : </label><input type="text" id="nick" />
      <button id="join">Join</button>
  </form>
  <div id="nicknames"><ul></ul></div>


      <label>Message : </label><input type="text" id="msginput" />
<button id="send">Send</button>
<div id="msglist"><ul></ul></div>
-->
<h1>Chat Server</h1>
<div id="chatfield"></div>
<input id="talk">

</body>
</html>
